<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Employé POSITIF - Travailler</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <link rel="stylesheet" href="newCascadeStyleSheet.css">
    </head> 
    <body>
        
        <input type="button" value="Retour Menu" onclick="javascript:location.href='MenuEmp.html'">
        
        <div style="text-align: center; margin: 0 auto">
            <p id="fenetreTravail">
                <FONT size="20">ATTENTE D'UN CLIENT </FONT>
            </p>
            <div id="cachee"></div>
        </div>
        
        <script>
            $(document).ready(function () {
               attenteClient();
            });
    
            
            function attenteClient(){
                setTimeout( function(){
                $.ajax({
                    url: './ActionServlet',
                    method: 'POST',
                    data: {
                        action: 'attenteClient'
                    },
                   dataType: 'json'
                }).done(function (data) {
                    
                    var prenom = data.personne.prenom;
                    if(prenom=="pas de client en attente")
                    {
                        //console.log(prenom);
                    }else {
                         window.location="TravailConversation.html";
                    }
                    
                   // 
                }).fail(function( jqXHR, textStatus ) {
                    alert( "Request failed: " + textStatus );
                });
                            attenteClient(); // on relance la fonction
                }, 5000); // on exécute le chargement toutes les 5 secondes
                            //clearInterval(idAttente);
            }
        
        </script>
        
    </body>
    
</html>
